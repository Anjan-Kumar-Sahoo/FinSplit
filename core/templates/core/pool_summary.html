<!DOCTYPE html>
<html>
<head>
  <title>Pool Summary | FinSplit</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; max-width: 700px; margin: auto; }
    input, button { padding: 10px; margin: 5px 0; width: 100%; }
    .btn { background-color: #17a2b8; color: white; border: none; cursor: pointer; }
    .btn:hover { background-color: #138496; }
    h3 { margin-top: 30px; }
    ul { list-style: none; padding-left: 0; }
    li { margin-bottom: 8px; }
  </style>
</head>
<body>
  <h2>üèòÔ∏è Pool Summary</h2>

  <form id="pool-form">
    <label for="pool_id"><strong>Enter Pool ID:</strong></label>
    <input type="number" id="pool_id" required>
    <button type="submit" class="btn">Get Summary</button>
  </form>

<a href="/" style="display:inline-block;background-color:#4CAF50;color:white;padding:10px 16px;text-decoration:none;border-radius:8px;margin-top:20px;font-weight:bold;transition:background-color 0.3s ease;">üè† Chalo Wapis Dashboard Chalte Hai</a>


  <div id="pool-summary-output"></div>

  <script>
    document.getElementById("pool-form").addEventListener("submit", async function (e) {
      e.preventDefault();

      const pool_id = document.getElementById("pool_id").value.trim();
      const output = document.getElementById("pool-summary-output");
      output.innerHTML = "Loading...";

      const res = await fetch(`/pool-summary/${pool_id}/`);
      const data = await res.json();

      if (res.ok) {
        let html = `<h3>Summary for Pool: ${data.pool}</h3><ul>`;

        if (data.summary.length === 0) {
          html += `<li>No unsettled dues in this pool.</li>`;
        } else {
          data.summary.forEach(item => {
            html += `<li><strong>${item.owed_by}</strong> owes <strong>${item.owed_to}</strong> ‚Çπ${item.amount} for <em>${item.bill_title}</em></li>`;
          });
        }

        html += `</ul>`;
        output.innerHTML = html;

      } else {
        output.innerHTML = `<p style="color:red;">${data.error}</p>`;
      }
    });
  </script>
</body>
</html>
